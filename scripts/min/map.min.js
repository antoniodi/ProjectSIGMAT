function initMap(){function e(e,t){var o=new google.maps.InfoWindow({content:e});google.maps.event.addListener(t,"click",function(){o.open(h,t)})}function o(e,t){w.setContent(e),google.maps.event.addListener(t,"click",function(){w.open(h,t)})}function i(t){for(var o=0;o<t.length;o++)e(t[o].Nombre,T(t[o].latitud,t[o].longitud))}function n(e){var t=e.getPosition();infoWindow1.setContent(['"latitud":',t.lat(),',"longitud":',t.lng(),""].join("")),infoWindow1.open(h,e)}function a(e,i){setInterval(function(){switch(e.HoraS){case 0:if(b<e.coordenadas.length){var n=-e.coordenadas[b].id+4;t=b-10*(e.coordenadas[b].id-1)+1,chart.series[n].data[1].update(t),C(e.coordenadas[b].latitud,e.coordenadas[b].longitud,i),o("<p>Ruta: "+e.Ruta+"<br>latitud: "+e.coordenadas[b].latitud+"<br>lontitud: "+e.coordenadas[b].longitud+"<br>id: "+e.coordenadas[b].id+"<br>Hora salida: "+e.HoraS+"</p>",i)}else{b=0;for(var a=0;a<chart.series.length;a++)chart.series[a].data[1].update(b)}b++;break;case 20:if(g<e.coordenadas.length&&g>=0){var n=-e.coordenadas[g].id+4;t=g-10*(e.coordenadas[g].id-1)+1,console.log(g),chart.series[n].data[2].update(t),C(e.coordenadas[g].latitud,e.coordenadas[g].longitud,i),o("<p>Ruta: "+e.Ruta+"<br>latitud: "+e.coordenadas[g].latitud+"<br>lontitud: "+e.coordenadas[g].longitud+"<br>id: "+e.coordenadas[g].id+"<br>Hora salida: "+e.HoraS+"</p>",i)}else if(0>=g)g++;else{g=0;for(var a=0;a<chart.series.length;a++)chart.series[a].data[2].update(g)}g++}},200)}function s(e,t){var o=document.getElementById("map-zoom-in"),i=document.getElementById("map-zoom-out");e.appendChild(o),e.appendChild(i),google.maps.event.addDomListener(o,"click",function(){t.setZoom(t.getZoom()+1)}),google.maps.event.addDomListener(i,"click",function(){t.setZoom(t.getZoom()-1)})}var l=7.09,r=-73.11,d=13,p="img/busnaranja.svg",u="img/busestacionazul.svg",y="#2d313f",m=-20,c=5,f=[{elementType:"labels",stylers:[{saturation:m}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.sport_complex",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"landscape",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"water",elementType:"geometry",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]}],v={center:new google.maps.LatLng(l,r),zoom:d,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:f},h=new google.maps.Map(document.getElementById("map"),v),T=function(e,t){var o=new google.maps.Marker({position:new google.maps.LatLng(e,t),map:h,visible:!0,icon:u,zIndex:2});return o},w=new google.maps.InfoWindow({content:null});$.getJSON("http://localhost:8001/data/coordenadas.json",function(e){$.coordenadas=e,i(e)});var L=new google.maps.Marker({position:null,map:h,visible:!0,icon:p}),k=new google.maps.Marker({position:null,map:h,visible:!0,icon:p}),C=function(e,t,o){var i=new google.maps.LatLng(e,t);o.setPosition(i)};infoWindow1=new google.maps.InfoWindow;var I=new google.maps.Marker({position:new google.maps.LatLng(7.071729,-73.107195),map:h,draggable:!0,visible:!0});google.maps.event.addListener(I,"click",function(){n(I)}),$.getJSON("http://localhost:8001/data/ruta2.json",function(e){$.coordenadas=e,a(e.info[0],L),a(e.info[1],k)}),b=0,g=-20;{var M=document.createElement("div");new s(M,h)}h.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(M),google.maps.event.addDomListener(window,"resize",function(){var e=h.getCenter();google.maps.event.trigger(h,"resize"),h.setCenter(e)})}