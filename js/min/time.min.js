function setTimelineWidth(e,t,n){return totalWidth=n*e+e,t.children(".line").children(".linei").css("width",totalWidth+"px"),totalWidth}function setPosTimelineE(e,t,n){console.log(e),disNormal=Math.round(e*t+t),console.log(disNormal),n.css("left",disNormal+"px"),n.css("transform","translateX(-50%)")}function setPosTimelineB(e,t,n,i){disNormal=Math.round((t+120)/i*(n-120)),dis=120+Math.round(t/10),console.log("bus"+disNormal),e.css("left",dis+"px"),e.css("transform","translateX(-50%)"),e.css("transition","left 1s linear")}function updateSlide(e,t,n){var i=e.children(".line"),l=i.children(".linei"),r=getTranslateValue(l),s=Number(i.css("width").replace("px",""));"next"==n?translateTimeline(e,r-s,s-t):translateTimeline(e,r+s)}function getTranslateValue(e){var t=window.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var i=n[4]}else var i=0;return Number(i)}function translateTimeline(e,t,n){var i=e.children(".line").children(".linei").get(0),l=e.find(".mover");console.log(i),t=t>0?0:t,t="undefined"!=typeof n&&n>t?n:t,setTransformValue(i,"translateX",t+"px"),0==t?l.find(".prev").addClass("inactive"):l.find(".prev").removeClass("inactive"),t==n?l.find(".next").addClass("inactive"):l.find(".next").removeClass("inactive")}function setTransformValue(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}$.getJSON("http://localhost:8008/data/r1.json").success(function(e){$.rutas=e,jQuery(document).ready(function(t){var n=120,i=n*e.length+2*n,l=5,r=new itinerario(l,e.length,n);t("#btn1").click(function(){r.agregarRecorrido("hola todos"),a=t(".timeline0")}),t("#btn2").click(function(){r.eliminarRecorrido(0),a=t(".timeline0")}),t("#btn3").click(function(){t(".bus").eq(0).css("background-image","url(../img/bus-markerv.svg)")});for(var s=t(".timeline"),a=t(".timeline0"),o=s.children(".line"),d=a.children(".line"),c=o.children(".linei"),m=(d.children(".linei"),0);m<e.length;m++){var u=document.createElement("li");u.innerHTML=e[m].Nombre,u.className+="estacion",c[0].appendChild(u)}var f=c.find("li");for(timelineWidth=setTimelineWidth(n,s,e.length),m=0;m<f.length;m++)setPosTimelineE(m,n,f.eq(m),e[m].distancia,i,timelineWidth);s.addClass("loaded"),t.getJSON("http://localhost:8008/data/ite1.json").success(function(e){t.bus=e,b=0,setInterval(function(){if(b<e[0].distancia.length){for(var n=0;n<e.length;n++)setPosTimelineB(t(".bus").eq(n),e[n].distancia[b],timelineWidth,i);b++}else b=0},1e3)})})});