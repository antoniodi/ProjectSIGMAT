function setTimelineWidth(e,t,n){return totalWidth=n*e+e,t.children(".line").children(".linei").css("width",totalWidth+"px"),totalWidth}function setPosTimelineE(e,t,n){console.log(e),disNormal=Math.round(e*t+t),console.log(disNormal),n.css("left",disNormal+"px"),n.css("transform","translateX(-50%)")}function setPosTimelineB(e,t){dis=Math.round(t),e.css("left",dis+"px"),e.css("transform","translateX(-50%)"),e.css("transition","left 1s linear")}function updateSlide(e,t,n){var i=e.children(".line"),l=i.children(".linei"),a=getTranslateValue(l),r=Number(i.css("width").replace("px",""));"next"==n?translateTimeline(e,a-r,r-t):translateTimeline(e,a+r)}function getTranslateValue(e){var t=window.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var i=n[4]}else var i=0;return Number(i)}function translateTimeline(e,t,n){var i=e.children(".line").children(".linei").get(0),l=e.find(".mover");console.log(i),t=t>0?0:t,t="undefined"!=typeof n&&n>t?n:t,setTransformValue(i,"translateX",t+"px"),0==t?l.find(".prev").addClass("inactive"):l.find(".prev").removeClass("inactive"),t==n?l.find(".next").addClass("inactive"):l.find(".next").removeClass("inactive")}function setTransformValue(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}jQuery(document).ready(function(e){e.getJSON("http://localhost:8000/data/estacionesR1.json").success(function(t){e.rutas=t;{var n=120,i=n*t.length+n;t.length}e.getJSON("http://localhost:8000/data/busesR1.json").success(function(i){e.bus=i;var l=i.length;it=new itinerario(l,t.length,n)});var l=e(".timeline"),r=l.children(".line"),s=r.children(".linei");e("#btn1").click(function(){it.agregarRecorrido("hola todos"),timeline0=e(".timeline0")}),e("#btn2").click(function(){it.eliminarRecorrido(0),timeline0=e(".timeline0")}),e("#btn3").click(function(){e(".bus").eq(0).css("background-image","url(../img/bus-markerv.svg)")}),a=0,e("#btn4").click(function(){e(".lineT").eq(a).css("background-color","#FF5252"),a++}),e("#btn5").click(function(){e(".lineT").eq(a).css("background-color","#00E676"),a++}),e("#btn6").click(function(){e(".lineT").eq(a).css("background-color","#3F51B5"),a++});for(var o=0;o<t.length;o++){var c=document.createElement("li");c.innerHTML=t[o].Nombre,c.className+="estacion",s[0].appendChild(c)}var d=s.find("li");for(timelineWidth=setTimelineWidth(n,l,t.length),o=0;o<d.length;o++)setPosTimelineE(o,n,d.eq(o),t[o].distancia,i);l.find(".mover").on("click",".next",function(t){t.preventDefault(),updateSlide(l,timelineWidth,"next"),timeline0=e(".timeline0");for(var n=0;n<timeline0.length;n++)updateSlide(timeline0.eq(n),timelineWidth,"next")}),l.find(".mover").on("click",".prev",function(e){e.preventDefault(),updateSlide(l,timelineWidth,"prev");for(var t=0;t<timeline0.length;t++)updateSlide(timeline0.eq(t),timelineWidth,"prev")}),l.addClass("loaded")}),e.getJSON("http://localhost:8000/data/busesR1.json").success(function(t){e.bus=t,b=0,setInterval(function(){if(b<t[0].distancia.length){for(var n=0;n<t.length;n++)setPosTimelineB(e(".bus").eq(n),t[n].distancia[b]);b++}else b=0},1e3)})});