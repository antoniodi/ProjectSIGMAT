function Recorridos(e,i,n,t,s){function a(e,i,n){return totalWidth=n*e+e,i.children(".line").children(".linei").css("width",totalWidth+"px"),totalWidth}for(var l=n.length,r=[],o=0;l>o;o++)r.push("<div class=estacion>"+n[o].nombre+"</div>");$(".modal-trigger").leanModal(open),$(".cajaRR").append("<div class=cajaR"+t+"><div class=timelineM><div id=recorrido class=line><ol class=linei>"+r.join("")+"</ol> </div> <div class=nombreRuta style=background-color:#"+s+"> <h1>"+i+"</h1></div><a href=unicaRuta.html?ruta="+i+" target=_blank><i class=material-icons id=detalle >launch</i></a><input id=id"+t+" type=radio value="+t+"><label class=cerrar id=cerrar for=id"+t+">x</label></div></div></div>"),$(".prev").addClass("inactive");var d=$(".cajaR"+t);this.timelineM=d.children(".timelineM");var c=(this.timelineM.children(".datos"),this.timelineM.children(".line")),u=c.children(".linei");vectorEstaciones=u.children(".estacion"),TTolerancia=20,TToleranciaEstaciones=10,busesAceptados=[],e=100;for(var o=0;l>o;o++)setPosTimelineE(o,e,vectorEstaciones.eq(o));estaciones=[];for(var o=0;l>o;o++)estaciones.push("<li class=estacion1></li>");for(var m=u.children(".estacion1"),o=0;l>o;o++)setPosTimelineE(o,e,m.eq(o));var f=d.children(".timeline");this.timelineM=d.children(".timelineM"),a(e,f,l),timelineWidth=a(e,this.timelineM,l),longitudTimeline=timelineWidth,f.addClass("loaded"),f.find(".mover").on("click",".next",function(e){e.preventDefault(),updateSlide(f,longitudTimeline,"next"),updateSlide(this.timelineM,longitudTimeline,"next")}),f.find(".mover").on("click",".prev",function(e){e.preventDefault(),updateSlide(f,longitudTimeline,"prev"),updateSlide(this.timelineM,longitudTimeline,"prev")}),this.agregarBuses=function(e,i){var n=this.timelineM.children(".line"),t=n.children(".linei");if(1==e)t.append("<li class=bus>"+i+"</li>");else if(e>=2){for(var s=[],a=0;e>a;a++)s.push("<li class=bus>"+i+"</li>");t.append(s.join(""))}else console.log("El n√∫mero de buses indicado es invalido")},this.agregarRecorrido=function(e,i){u.append("<li class=bus id="+i+e+" ><div class=busM>"+i+"</div></li>"),busesAceptados.push(i)},this.getVectorIndices=function(e){indices=[];for(var i=0;i<busesAceptados.length;i++)indice=e.indexOf(busesAceptados[i]),indice>-1&&indices.push(indice);return indices},this.eliminarBus=function(e){var i=this.timelineM.children(".line"),n=i.children(".linei"),t=n.children(".bus");t.length-1<e?console.log("el sistemas no cuenta con buses"):t[e].remove()},this.actualizarBus=function(e,i){dis=Math.round(i.porcAvan),e.css("left",dis+"px"),e.css("transform","translateX(-50%)"),e.css("transition","left 1s linear"),TRecorrido=(i.hora-i.horaSaliDete)/1e3,TRecorrido-i.tiemAcumDete>TTolerancia?e.css("background-image","url(../img/bus-markern.svg)"):TRecorrido-i.tiemAcumDete<-1*TTolerancia?e.css("background-image","url(../img/bus-markeraz.svg)"):e.css("background-image","url(../img/bus-markerv.svg)")}}function setPosTimelineE(e,i,n){disNormal=Math.round(e*i+i),n.css("left",disNormal+"px"),n.css("transform","translateX(-50%)")}function setPosTimelineB(e,i){dis=Math.round(i),e.css("left",dis+"px"),e.css("transform","translateX(-50%)"),e.css("transition","left 1s linear")}function updateSlide(e,i,n){var t=e.children(".line"),s=t.children(".linei"),a=getTranslateValue(s),l=Number(t.css("width").replace("px",""));"next"==n?translateTimeline(e,a-l,l-i):translateTimeline(e,a+l)}function getTranslateValue(e){var i=window.getComputedStyle(e.get(0),null),n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var t=n[4]}else var t=0;return Number(t)}function translateTimeline(e,i,n){var t=e.children(".line").children(".linei").get(0),s=e.find(".mover");console.log(t),i=i>0?0:i,i="undefined"!=typeof n&&n>i?n:i,setTransformValue(t,"translateX",i+"px"),0==i?s.find(".prev").addClass("inactive"):s.find(".prev").removeClass("inactive"),i==n?s.find(".next").addClass("inactive"):s.find(".next").removeClass("inactive")}function setTransformValue(e,i,n){e.style["-webkit-transform"]=i+"("+n+")",e.style["-moz-transform"]=i+"("+n+")",e.style["-ms-transform"]=i+"("+n+")",e.style["-o-transform"]=i+"("+n+")",e.style.transform=i+"("+n+")"}