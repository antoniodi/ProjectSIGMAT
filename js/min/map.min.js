function agregarRutas(e){this.rutas=e,individualizarCategorias();var a=[];agregarCategoriaModal(opcionesRutas);for(var o=0;o<opcionesRutas.length;o++)a.push("<option value="+o+">"+opcionesRutas[o]+"</option>");$("#filtrar").append(a.join(" ")),generarOpciones(e),$("select").material_select(),eleccion=$("#filtrar").change(function(){generarOpciones(buscarCoincidencias(opcionesRutas[eleccion.val()]))})}function individualizarCategorias(){for(var e=["Todas las rutas"],a=0;a<rutas.length;a++)e=e.concat(rutas[a].categoria);this.opcionesRutas=e.unique()}function agregarCategoriaModal(){opcionesSelectm=[],opcionesSelectu=[];for(var e=0;e<opcionesRutas.length;e++)opcionesSelectm.push("<div class=cajar> "+opcionesRutas[e]+"</div>"),opcionesSelectu.push("<div class=cajar> "+opcionesRutas[e]+"</div>");cajam1s.append(opcionesSelectm.join(" ")),cajamm=cajam1s.find(".cajar"),cajam2s.append(opcionesSelectu.join(" ")),cajamu=cajam2s.find(".cajar")}function generarOpcionesM(e){cuadroRutas=[];for(var a=0;a<e.length;a++)cuadroRutas.push("<p><input type=checkbox name=rutas value="+e[a].nombre+" id="+e[a].nombre+" /><label for="+e[a].nombre+">"+e[a].nombre+"</label></p>");multipleM.children().remove(),multipleM.append(cuadroRutas.join(" "))}function generarOpcionesU(e){cuadroRutas=[],cuadroRutas.push("<p><input name=group1 value="+e[0].nombre+" type=radio id=u"+e[0].nombre+" class=with-gap checked/><label for=u"+e[0].nombre+">"+e[0].nombre+"</label></p>");for(var a=1;a<e.length;a++)cuadroRutas.push("<p><input name=group1 value="+e[a].nombre+" type=radio id=u"+e[a].nombre+" class=with-gap /><label for=u"+e[a].nombre+">"+e[a].nombre+"</label></p>");unica.children().remove(),unica.append(cuadroRutas.join(" "))}function generarOpciones(e){cuadroRutas=[];for(var a=0;a<e.length;a++)cuadroRutas.push("<div class=caja3> <div class=logo style=background:#"+e[a].color+";>"+e[a].nombre+"</div>  <div class=texto>"+e[a].descripcion+"</div><div class=switch><label><input type=checkbox value="+e[a].nombre+"><span class=lever></span></label></div></div>");$(".bloque4").children().remove(),$(".bloque4").append(cuadroRutas.join(" "))}function buscarCoincidencias(e){if(elegidos=[],"Todas las rutas"==e)elegidos=rutas;else for(var a=0;a<rutas.length;a++)-1!==rutas[a].categoria.indexOf(e)&&elegidos.push(rutas[a]);return elegidos}function markerPaqueteFactory(){function e(e,a){for(var o=0;a>o;o++)Restacion.push(new google.maps.Marker({map:e,icon:marker_estacion,zIndex:2}));return Restacion}function a(e,a){for(var o=0;a>o;o++)Rparada.push(new google.maps.Marker({map:e,icon:marker_parada,zIndex:2}));return Rparada}function o(e,a){for(var o=0;a>o;o++)RR1.push(new google.maps.Marker({map:e,icon:marker_bus0}));return RR1}function n(e,a){for(var o=0;a>o;o++)RR2.push(new google.maps.Marker({map:e,icon:marker_bus1}));return RR2}function t(e,a){for(var o=0;a>o;o++)RR3.push(new google.maps.Marker({map:e,icon:marker_bus2}));return RR3}this.crearPaqueteMarker=function(r,s,i){switch(r){case"estacionestotales":return console.log("Se creo un marker todas las estaciones"),e(s,i);case"paradastotales":return console.log("Se creo un marker para todas las paradas"),a(s,i);case"R1":return console.log("Se creo un recorrido de la ruta R1"),o(s,i);case"R2":return console.log("Se creo un recorrido de la ruta R2"),n(s,i);case"R3":return console.log("Se creo un recorrido de la ruta R3"),t(s,i);default:console.log("Nombre de la Ruta no esta definido en la funcion markerPaqueteFactory()")}}}function eliminarmarkerPaqueteFactory(){function e(){for(var e=0;e<Restacion.length;e++)Restacion[e].setMap(null);Restacion=[]}function a(){for(var e=0;e<Rparada.length;e++)Rparada[e].setMap(null);Rparada=[]}function o(){for(var e=0;e<RR1.length;e++)RR1[e].setMap(null);RR1=[]}function n(){for(var e=0;e<RR2.length;e++)RR2[e].setMap(null);RR2=[]}function t(){for(var e=0;e<RR3.length;e++)RR3[e].setMap(null);RR3=[]}this.eliminarPaqueteMarker=function(r,s,i){switch(r){case"estacionestotales":return console.log("Se eliminimaron las estaciones totales"),e(s,i);case"paradastotales":return console.log("Se elimino las paradas totales"),a(s,i);case"R1":return console.log("Se elimino un recorrido de la ruta R1"),o(s,i);case"R2":return console.log("Se elimino un recorrido de la ruta R2"),n(s,i);case"R3":return console.log("Se elimino un recorrido de la ruta R3"),t(s,i);default:console.log("Nombre de la Ruta no esta definido en la funcion markerPaqueteFactory()")}}}function markerPaqueteFactoryestacionesyparadas(){function e(e,a){for(var o=0;a>o;o++)RR1estacion.push(new google.maps.Marker({map:e,icon:marker_eyp_bus0,zIndex:2}));return RR1estacion}function a(e,a){for(var o=0;a>o;o++)RR2estacion.push(new google.maps.Marker({map:e,icon:marker_eyp_bus1,zIndex:2}));return RR2estacion}function o(e,a){for(var o=0;a>o;o++)RR3estacion.push(new google.maps.Marker({map:e,icon:marker_eyp_bus2,zIndex:2}));return RR3estacion}this.crearPaqueteMarker=function(n,t,r){switch(n){case"R1":return e(t,r);case"R2":return a(t,r);case"R3":return o(t,r);default:console.log("Nombre de la Ruta no esta definido en la funcion markerPaqueteFactory()")}}}function eliminarmarkerPaqueteFactoryestacionesyparadas(){function e(){for(var e=0;e<RR1estacion.length;e++)RR1estacion[e].setMap(null);RR1estacion=[]}function a(){for(var e=0;e<RR2estacion.length;e++)RR2estacion[e].setMap(null);RR2estacion=[]}function o(){for(var e=0;e<RR3estacion.length;e++)RR3estacion[e].setMap(null);RR3estacion=[]}this.eliminarPaqueteMarker=function(n,t,r){switch(n){case"R1":return e(t,r);case"R2":return a(t,r);case"R3":return o(t,r);default:console.log("Nombre de la Ruta no esta definido en la funcion markerPaqueteFactory()")}}}function h(){}function initMap(){function e(e,a){a.setPosition(new google.maps.LatLng(e.Latitud,e.Longitud))}function a(e,a){var o=new google.maps.InfoWindow({content:e});google.maps.event.addListener(a,"click",function(){o.open(l,a)})}function o(e,a){a.setPosition(new google.maps.LatLng(e.latitud,e.longitud))}function n(e,a){var o=document.getElementById("map-zoom-in"),n=document.getElementById("map-zoom-out");e.appendChild(o),e.appendChild(n),google.maps.event.addDomListener(o,"click",function(){a.setZoom(a.getZoom()+1)}),google.maps.event.addDomListener(n,"click",function(){a.setZoom(a.getZoom()-1)})}var t=7.09,r=-73.11,s=13,i=[{stylers:[{lightness:3},{saturation:-60}]},{featureType:"road.local",stylers:[{lightness:-20},{hue:"#2d313f"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{lightness:-20},{gamma:2.15},{hue:"#2d313f"}]},{featureType:"water",stylers:[{gamma:.51},{saturation:17},{lightness:-7},{hue:"#0066ff"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{lightness:-21},{hue:"#2d313f"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-82},{lightness:-20},{hue:"#2d313f"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{saturation:-90},{lightness:1},{hue:"#2d313f"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"transit.station.rail",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],c={center:new google.maps.LatLng(t,r),zoom:s,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:i},l=new google.maps.Map(document.getElementById("map"),c);$("input.filled-in").on("change",function(){var o=$(this),n=o.val();if(o.is(":checked"))switch(n){case"estacionestotales":case"paradastotales":var t=factory.crearPaqueteMarker(n,l,100);$.getJSON("http://localhost:8000/data/"+n+".json",function(o){$.coordenadas=o;for(var n=0;n<o.length;n++)e(o[n].Coordenada,t[n]),a(o[n].Nombre,t[n])}),console.log("ESTA FUNCIONANDO "+n)}else switch(n){case"estacionestotales":case"paradastotales":{factory1.eliminarPaqueteMarker(n,l,100)}console.log("SE ELIMINARON "+n)}});new google.maps.InfoWindow({content:null});$(".bloque4").on("click","input",function(){function n(e,a){return setInterval(e,a)}var t=$(this),r=t.val();if(t.is(":checked")){var s=0;switch(r){case"R1":case"R2":case"R3":var i=factory2.crearPaqueteMarker(r,l,50);$.getJSON("http://localhost:8000/data/rutasconsultar"+r+".json",function(o,n){$.coordenadas=o;for(var t=n.length,r=0;r<o.length;r++)for(var s=0;t>s;s++)e(o[r].paradas[s].coordenadas,i[s]),a(o[r].paradas[s].nombre,i[s])});var c=factory.crearPaqueteMarker(r,l,5),u=function(){$.getJSON("http://localhost:8000/data/busesmapa"+r+".json",function(e){if($.coordenadas=e,s<e[0].coordenadas.length){for(var n=0;n<e.length;n++)o(e[n].coordenadas[s],c[n]),a(e[n].Ruta,c[n]);s++}else s=0})};u(),n(u,5e3),console.log("VALOR Que TIENE "+r)}}else switch(r){case"R1":case"R2":case"R3":{factory1.eliminarPaqueteMarker(r,l,5),factory3.eliminarPaqueteMarker(r,l,50)}console.log("lo des-selecciono "+r)}});{var u=document.createElement("div");new n(u,l)}l.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(u),google.maps.event.addDomListener(window,"resize",function(){var e=l.getCenter();google.maps.event.trigger(l,"resize"),l.setCenter(e)})}var marker_bus0="img/bus-markern.svg",marker_bus1="img/bus-markerv.svg",marker_bus2="img/bus-markeraz.svg",marker_estacion="img/bus-stop-estaciones.svg",marker_parada="img/bus-stop-paradas.svg",marker_eyp_bus0="img/bus-stopn.svg",marker_eyp_bus1="img/bus-stopv.svg",marker_eyp_bus2="img/bus-stopaz.svg",flecha=$(".flecha"),flecha0=flecha.children("a"),izquierda=$(".izquierda"),estado=!0;opcionesRutas=void 0,rutas=void 0,cajam1s=$(".cajam1s"),cajamm=void 0,cajam2s=$(".cajam2s"),cajamu=void 0,multipleM=$(".multipleM"),unica=$(".unica"),Array.prototype.unique=function(e){return function(){return this.filter(e)}}(function(e,a,o){return o.indexOf(e,a+1)<0}),$(".modal-trigger").leanModal(open),flecha.click(function(){estado?(estado=!1,izquierda.css("left","-330px"),flecha0.css("transform","rotateZ(180deg)")):(estado=!0,izquierda.css("left","0px"),flecha0.css("transform","rotateZ(0deg)"))}),cajam1s.on("click","div",function(){t=$(this),console.log(t.index()),t.addClass("active").siblings().removeClass("active"),generarOpcionesM(buscarCoincidencias(opcionesRutas[t.index()]))}),cajam2s.on("click","div",function(){t=$(this),console.log(t.index()),t.addClass("active").siblings().removeClass("active"),generarOpcionesU(buscarCoincidencias(opcionesRutas[t.index()]))}),$(".amodal1").click(function(){seleccionadasC=[],$("input:checkbox[name=rutas]").each(function(){$(this).is(":checked")&&seleccionadasC.push($(this).val())}),0==seleccionadasC.length?Materialize.toast("¡Porfavor, Seleccione almenos una ruta!",5e3):window.open("view/multiplesRutas.html?rutas="+seleccionadasC.join(","))}),$(".amodal2").click(function(){seleccionada=void 0,seleccionada=$("input[name=group1]:checked").val(),void 0==seleccionada?Materialize.toast("¡Porfavor, Seleccione almenos una ruta!",5e3):(window.open("view/indextabla.html?rutas="+seleccionada),Materialize.toast("¡La ruta seleccionada es: "+seleccionada+"!",5e3))});var Restacion=[],Rparada=[],RR1=[],RR1estacion=[],RR2=[],RR2estacion=[],RR3=[],RR3estacion=[],linksp=$(".tabs_links"),links=linksp.find("a"),items=$(".items");links.eq(0).add(items.eq(0)).addClass("active"),linksp.on("click","a",function(){var e=$(this),a=e.index();e.add(items.eq(a)).addClass("active").siblings().removeClass("active")}),z=new h;