function individualizarCategorias(e){for(var a=["Todas las rutas"],t=0;t<e.length;t++)a=a.concat(e[t].categoria);return a.unique()}function agregarCategoriaModal(e){opcionesSelect=[];for(var a=0;a<e.length;a++)opcionesSelect.push("<div class=cajar>"+e[a]+"</div>");$(".cajam1s").append(opcionesSelect.join(" ")),$(".cajam2s").append(opcionesSelect.join(" "))}function agregarRutas(e){var a=individualizarCategorias(e),t=[];agregarCategoriaModal(a);for(var o=0;o<a.length;o++)t.push("<option value="+o+">"+a[o]+"</option>");$("select").append(t.join(" ")),$("select").material_select(),eleccion=$("#filtrar").change(function(){rutasSeleccionadas=buscarCoincidencias(e,a[eleccion.val()]),console.log(rutasSeleccionadas),generarOpciones(rutasSeleccionadas)})}function generarOpciones(e){cuadrorutas=[];for(var a=0;a<e.length;a++)cuadrorutas.push("<div class=caja3> <div class=logo style=background:#"+e[a].color+";>"+e[a].nombre+"</div>  <div class=texto>"+e[a].descripcion+"</div><div class=switch><label><input type=checkbox><span class=lever></span></label></div></div>");$(".bloque4").children().remove(),$(".bloque4").append(cuadrorutas.join(" "))}function buscarCoincidencias(e,a){if(elegidos=[],"Todas las rutas"==a)elegidos=e;else for(var t=0;t<e.length;t++)-1!==e[t].categoria.indexOf(a)&&elegidos.push(e[t]);return elegidos}function markerPaqueteFactory(){function e(e,a){for(var t=[],o=0;a>o;o++)t.push(new google.maps.Marker({map:e,icon:marker_estacion,zIndex:2}));return t}function a(e,a){for(var t=[],o=0;a>o;o++)t.push(new google.maps.Marker({map:e,icon:marker_bus0}));return t}function t(e,a){for(var t=[],o=0;a>o;o++)t.push(new google.maps.Marker({map:e,icon:marker_bus1}));return t}function o(e,a){for(var t=[],o=0;a>o;o++)t.push(new google.maps.Marker({map:e,icon:marker_bus2}));return t}this.crearPaqueteMarker=function(r,n,s){switch(r){case"estacion":return console.log("Se creo un marker para una estacion"),e(n,s);case"R1":return console.log("Se creo un recorrido de la ruta R1"),console.log(a(n,s)),a(n,s);case"R2":return console.log("Se creo un recorrido de la ruta R2"),t(n,s);case"R3":return console.log("Se creo un recorrido de la ruta R3"),o(n,s);default:console.log("Nombre de la Ruta no esta definido en la funcion markerPaqueteFactory()")}}}function h(){}function initMap(){function e(e,a){var t=new google.maps.InfoWindow({content:e});google.maps.event.addListener(a,"click",function(){t.open(c,a)})}function a(){$.getJSON("http://localhost:8000/data/ruta1.json",function(e){if($.coordenadas=e,d<e[0].coordenadas.length){for(var a=0;a<e.length;a++)t(e[a].coordenadas[d],u[a]),g[a]=e[a].coordenadas[d].id;d++}else d=0})}function t(e,a){a.setPosition(new google.maps.LatLng(e.latitud,e.longitud))}function o(e,a){var t=document.getElementById("map-zoom-in"),o=document.getElementById("map-zoom-out");e.appendChild(t),e.appendChild(o),google.maps.event.addDomListener(t,"click",function(){a.setZoom(a.getZoom()+1)}),google.maps.event.addDomListener(o,"click",function(){a.setZoom(a.getZoom()-1)})}var r=7.09,n=-73.11,s=13,i=[{stylers:[{lightness:3},{saturation:-60}]},{featureType:"road.local",stylers:[{lightness:-20},{hue:"#2d313f"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{lightness:-20},{gamma:2.15},{hue:"#2d313f"}]},{featureType:"water",stylers:[{gamma:.51},{saturation:17},{lightness:-7},{hue:"#0066ff"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{lightness:-21},{hue:"#2d313f"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-82},{lightness:-20},{hue:"#2d313f"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{saturation:-90},{lightness:1},{hue:"#2d313f"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]},{featureType:"transit.station.rail",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],l={center:new google.maps.LatLng(r,n),zoom:s,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:i},c=new google.maps.Map(document.getElementById("map"),l);this.graficarEstaciones=function(a){for(var t=factory.crearPaqueteMarker("estacion",c,a.length),o=0;o<a.length;o++)t[o].setPosition(new google.maps.LatLng(a[o].latitud,a[o].longitud)),e(a[o].Nombre,t[o])};var u=(new google.maps.InfoWindow({content:null}),factory.crearPaqueteMarker("R2",c,5));timer=setInterval(a,1e3);{var d=0,g=[],m=$("#lista").change(function(){switch(clearInterval(timer),m.val()){case"1":timer=setInterval(a,100);break;case"2":timer=setInterval(a,1e3);break;case"3":timer=setInterval(a,5e3);break;default:timer=setInterval(a,1e3)}}),p=document.createElement("div");new o(p,c)}c.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(p),google.maps.event.addDomListener(window,"resize",function(){var e=c.getCenter();google.maps.event.trigger(c,"resize"),c.setCenter(e)})}var marker_bus0="img/bus-markern.svg",marker_bus1="img/bus-markerv.svg",marker_bus2="img/bus-markerm.svg",marker_estacion="img/bus-stop.svg",flecha=$(".flecha"),flecha0=flecha.children("a"),izquierda=$(".izquierda"),estado=!0;Array.prototype.unique=function(e){return function(){return this.filter(e)}}(function(e,a,t){return t.indexOf(e,a+1)<0}),$(".modal-trigger").leanModal(open),$("#modal1").openModal(),$("select").material_select(),flecha.click(function(){estado?(estado=!1,izquierda.css("left","-330px"),flecha0.css("transform","rotateZ(180deg)")):(estado=!0,izquierda.css("left","0px"),flecha0.css("transform","rotateZ(0deg)"))});var linksp=$(".tabs_links"),links=linksp.find("a"),items=$(".items");links.eq(0).add(items.eq(0)).addClass("active"),linksp.on("click","a",function(){var e=$(this),a=e.index();e.add(items.eq(a)).addClass("active").siblings().removeClass("active")}),z=new h;